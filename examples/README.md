# RP2040 AHT20 + BMP280 传感器Demo

这是一个基于RP2040微控制器的AHT20温湿度传感器和BMP280气压传感器的I2C通信演示程序。

## 硬件连接

### I2C连接
- **SDA**: GPIO6
- **SCL**: GPIO7
- **VCC**: 3.3V
- **GND**: GND

### 传感器连接
```
AHT20传感器:
- VCC -> 3.3V
- GND -> GND
- SDA -> GPIO6
- SCL -> GPIO7

BMP280传感器:
- VCC -> 3.3V
- GND -> GND
- SDA -> GPIO6
- SCL -> GPIO7
```

## 编译环境要求

1. **Pico SDK**: 需要安装Raspberry Pi Pico SDK
2. **CMake**: 3.13或更高版本
3. **ARM GCC**: ARM交叉编译工具链

## 编译步骤

1. 设置PICO_SDK_PATH环境变量：
```bash
export PICO_SDK_PATH=/path/to/pico-sdk
```

2. 创建构建目录：
```bash
mkdir build
cd build
```

3. 配置和编译：
```bash
cmake ..
make
```

4. 生成的文件：
- `demo.uf2`: 可直接烧录到RP2040的文件

## 烧录程序

1. 按住BOOTSEL按钮并插入USB线
2. RP2040会以USB存储设备形式出现
3. 将`demo.uf2`文件复制到RP2040设备中
4. 设备会自动重启并运行程序

## 输出格式

程序通过USB串口输出数据，格式严格参考原STM32项目：

```
RP2040 AHT20 + BMP280 传感器测试程序
=====================================

AHT20传感器初始化成功！
BMP280传感器初始化成功！

***************************
AHT20温湿度传感器数据输出:
温度: 24.5 ℃
湿度: 52.3 %

BMP280气压传感器数据输出:
气压: 1013.2500 hPa
温度: 24.52 ℃
海拔: 45.67 m

***************************
AHT20温湿度传感器数据输出:
温度: 24.6 ℃
湿度: 52.1 %

BMP280气压传感器数据输出:
气压: 1013.1800 hPa
温度: 24.53 ℃
海拔: 46.12 m
```

## 功能特点

1. **完全兼容**: 严格参考原STM32项目的算法和输出格式
2. **双传感器支持**: 同时读取AHT20和BMP280数据
3. **数据处理**: 包含温度补偿、压力补偿、海拔计算
4. **数据滤波**: 5点平均滤波，防止数据突变
5. **错误处理**: 完善的初始化检查和错误处理

## 技术参数

### AHT20传感器
- 温度范围: -40°C ~ +85°C
- 湿度范围: 0% ~ 100%RH
- 温度精度: ±0.3°C
- 湿度精度: ±2%RH

### BMP280传感器
- 压力范围: 300hPa ~ 1100hPa
- 温度范围: -40°C ~ +85°C
- 压力精度: ±1hPa
- 温度精度: ±0.01°C

## 注意事项

1. 确保I2C地址正确（AHT20: 0x38, BMP280: 0x77）
2. 检查硬件连接是否正确
3. 确保电源电压稳定在3.3V
4. 首次使用可能需要等待传感器稳定

## 故障排除

1. **初始化失败**: 检查I2C连接和电源
2. **数据异常**: 检查传感器是否正常工作
3. **通信错误**: 检查I2C地址和连接
4. **编译错误**: 确保Pico SDK路径正确

## 许可证

本项目基于原STM32项目移植，遵循相同的许可证条款。
